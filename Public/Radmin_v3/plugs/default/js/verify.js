/* updata by JC*/
(function($,n,o,p){var q=function(a,b){this.$element=a;this.defaults={type:1,figure:100,arith:0,width:"200px",height:"60px",fontSize:"30px",codeLength:6,btnId:"check-btn",ready:function(){},success:function(){},error:function(){}};this.options=$.extend({},this.defaults,b)};var r=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];var s=["#fffff0","#f0ffff","#f0fff0","#fff0f0"];var t=["#FF0033","#006699","#993366","#FF9900","#66CC66","#FF33CC"];q.prototype={init:function(){var a=this;this.loadDom();this.setCode();this.options.ready();this.$element[0].onselectstart=o.body.ondrag=function(){return false};this.$element.find(".verify-code, .verify-change-code").on("click",function(){a.setCode()});this.htmlDoms.code_btn.on("click",function(){a.checkCode()})},loadDom:function(){var a='<div class="cerify-code-panel"><div class="verify-code"></div><div class="verify-code-area"><div class="verify-input-area"><input type="text" class="varify-input-code" /></div><div class="verify-change-area"><a class="verify-change-code">换一张</a></div></div></div>';this.$element.append(a);this.htmlDoms={code_btn:$("#"+this.options.btnId),code:this.$element.find(".verify-code"),code_area:this.$element.find(".verify-code-area"),code_input:this.$element.find(".varify-input-code")};this.htmlDoms.code.css({width:this.options.width,height:this.options.height,"line-height":this.options.height,"font-size":this.options.fontSize});this.htmlDoms.code_area.css({width:this.options.width})},setCode:function(){var a=Math.floor(Math.random()*3);var b=Math.floor(Math.random()*5);this.htmlDoms.code.css({"background-color":s[a],color:t[b]});this.htmlDoms.code_input.val("");var c="";this.code_chose="";if(this.options.type==1){for(var i=0;i<this.options.codeLength;i++){var d=Math.floor(Math.random()*52);var e=d%2==0?"font-style:italic;margin-right: 10px;":"font-weight:bolder;";e+=Math.floor(Math.random()*2)==1?"font-weight:bolder;":"";this.code_chose+=r[d];c+='<font style="'+e+'">'+r[d]+"</font>"}}else{var f=Math.floor(Math.random()*this.options.figure);var g=Math.floor(Math.random()*this.options.figure);if(this.options.arith==0){var h=Math.floor(Math.random()*3)}switch(h){case 1:this.code_chose=parseInt(f)+parseInt(g);c=f+" + "+g+" = ?";break;case 2:if(parseInt(f)<parseInt(g)){var j=f;f=g;g=j}this.code_chose=parseInt(f)-parseInt(g);c=f+" - "+g+" = ?";break;default:this.code_chose=parseInt(f)*parseInt(g);c=f+" × "+g+" = ?";break}}this.htmlDoms.code.html(c)},checkCode:function(){if(this.options.type==1){var a=this.htmlDoms.code_input.val().toUpperCase();this.code_chose=this.code_chose.toUpperCase()}else{var a=this.htmlDoms.code_input.val()}if(a==this.code_chose){this.options.success()}else{this.options.error();this.setCode()}}};var u=function(a,b){this.$element=a;this.defaults={type:1,vOffset:5,vSpace:5,imgPath:["1.jpg","2.jpg"],imgSize:{width:"400px",height:"200px"},blockSize:{width:"50px",height:"50px"},barSize:{width:"400px",height:"40px"},ready:function(){},success:function(){},error:function(){}},this.options=$.extend({},this.defaults,b)};u.prototype={init:function(){var a=this;this.loadDom();this.options.ready();this.$element[0].onselectstart=o.body.ondrag=function(){return false};this.htmlDoms.move_block.on("touchstart",function(e){a.start(e)});this.htmlDoms.move_block.on("mousedown",function(e){a.start(e)});try{n.addEventListener("touchmove",function(e){a.move(e)});n.addEventListener("mousemove",function(e){a.move(e)});n.addEventListener("touchend",function(){a.end()});n.addEventListener("mouseup",function(){a.end()})}catch(e){console.log(e)}$(window).on("mousemove touchmove",function(e){a.move(e)});$(window).on("touchend mouseup",function(){a.end()});a.$element.find(".verify-refresh").on("click",function(){a.refresh()})},loadDom:function(){this.img_rand=Math.floor(Math.random()*this.options.imgPath.length);var a="";var b="";if(this.options.type!=1){var gap=["gap_top","gap_left","gap_bottom","gap_right"];var jigsaw=["jigsaw_top","jigsaw_left","jigsaw_bottom","jigsaw_right"];var temp_arr=[];var gap_arr=[];var rand=Math.ceil(Math.random()*jigsaw.length);temp_arr.push(jigsaw[rand-1]);gap_arr.push(gap[rand-1]);if(Math.ceil(Math.random()*2)==1){if((rand-1)>0){temp_arr.push(jigsaw[rand-2]);gap_arr.push(gap[rand-2])}else{temp_arr.push(jigsaw[jigsaw.length-1]);gap_arr.push(gap[jigsaw.length-1])}}else{if((rand-1)>jigsaw.length-2){temp_arr.push(jigsaw[0]);gap_arr.push(gap[0])}else{temp_arr.push(jigsaw[rand]);gap_arr.push(gap[rand])}}a+='<div class="verify-img-panel"><div  class="verify-refresh"><i class="iconfont fa fa-refresh"></i></div><div class="verify-gap"><div class="'+gap_arr[0]+'"></div><div class="'+gap_arr[1]+'"></div></div></div>';b='<div  class="verify-sub-block"><div class="'+temp_arr[0]+'"></div><div class="'+temp_arr[1]+'"></div></div>'}a+='<div class="verify-bar-area"><span  class="verify-msg">向右滑动完成验证</span><div class="verify-left-bar"><span class="verify-msg"></span><div  class="verify-move-block"><i  class="verify-icon iconfont fa fa-angle-right"></i>'+b+"</div></div></div>";this.$element.append(a);this.htmlDoms={gap:this.$element.find(".verify-gap"),sub_block:this.$element.find(".verify-sub-block"),img_panel:this.$element.find(".verify-img-panel"),bar_area:this.$element.find(".verify-bar-area"),move_block:this.$element.find(".verify-move-block"),left_bar:this.$element.find(".verify-left-bar"),msg:this.$element.find(".verify-msg"),icon:this.$element.find(".verify-icon"),refresh:this.$element.find(".verify-refresh"),jigswa_top:this.$element.find(".jigsaw_top"),jigswa_left:this.$element.find(".jigsaw_left"),jigswa_right:this.$element.find(".jigsaw_right"),jigswa_bottom:this.$element.find(".jigsaw_bottom")};this.status=false;this.setSize=this.resetSize(this);this.htmlDoms.gap.css({width:this.options.blockSize.width,height:this.options.blockSize.height,display:"none"});if(this.htmlDoms.jigswa_top.length==1){this.htmlDoms.jigswa_top.css({position:"absolute",width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4+"px,-90%,0)",border:"solid 1px #fff",borderRadius:"50%",borderBottom:"1px solid transparent"});this.$element.find(".gap_top").css({width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4+"px,-90%,0)",})}if(this.htmlDoms.jigswa_left.length==1){this.htmlDoms.jigswa_left.css({position:"absolute",width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d(-90%,"+Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4+"px,0)",border:"solid 1px #fff",borderRadius:"50%",borderRight:"1px solid transparent"});this.$element.find(".gap_left").css({width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d(-90%,"+Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4+"px,0)",})}if(this.htmlDoms.jigswa_right.length==1){this.htmlDoms.jigswa_right.css({position:"absolute",width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2)*0.9+"px,"+Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4+"px,0)",border:"solid 1px #fff",borderRadius:"50%",borderLeft:"1px solid transparent"});this.$element.find(".gap_right").css({width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2)*0.9+"px,"+Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4+"px,0)",})}if(this.htmlDoms.jigswa_bottom.length==1){this.htmlDoms.jigswa_bottom.css({position:"absolute",width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4+"px,"+this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2)*0.9+"px,0)",border:"solid 1px #fff",borderRadius:"50%",borderTop:"1px solid transparent"});this.$element.find(".gap_bottom").css({width:Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2+"px",height:Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2+"px",transform:"translate3d("+Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4+"px,"+this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2)*0.9+"px,0)",})}this.htmlDoms.sub_block.css({width:this.options.blockSize.width,height:this.options.blockSize.height,display:"none"});this.htmlDoms.img_panel.css({width:this.setSize.img_width,height:this.setSize.img_height,background:"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height});this.htmlDoms.bar_area.css({width:this.setSize.bar_width,height:this.options.barSize.height,"line-height":this.options.barSize.height});this.htmlDoms.move_block.css({width:this.options.barSize.height,height:this.options.barSize.height});this.htmlDoms.left_bar.css({width:this.options.barSize.height,height:this.options.barSize.height});this.randSet()},start:function(e){this.htmlDoms.msg.fadeOut();this.htmlDoms.move_block.css("background-color","#337ab7");this.htmlDoms.left_bar.css("border-color","#337AB7");this.htmlDoms.icon.css("color","#fff");this.htmlDoms.sub_block.fadeIn();this.htmlDoms.gap.fadeIn();e.stopPropagation();this.status=true},move:function(e){if(this.status){if(!e.touches){var x=e.clientX}else{var x=e.touches[0].pageX}var a=u.prototype.getLeft(this.htmlDoms.bar_area[0]);var b=x-a;if(this.options.type!=1){if(b>=this.htmlDoms.bar_area[0].offsetWidth-parseInt(parseInt(this.options.blockSize.width)/2)-2){b=this.htmlDoms.bar_area[0].offsetWidth-parseInt(parseInt(this.options.blockSize.width)/2)-2}}else{if(b>=this.htmlDoms.bar_area[0].offsetWidth-parseInt(parseInt(this.options.barSize.height)/2)+3){this.$element.find(".verify-msg:eq(1)").text("松开验证");b=this.htmlDoms.bar_area[0].offsetWidth-parseInt(parseInt(this.options.barSize.height)/2)+3}else{this.$element.find(".verify-msg:eq(1)").text("")}}if(b<=0){b=parseInt(parseInt(this.options.blockSize.width)/2)}this.htmlDoms.move_block.css("left",b-parseInt(parseInt(this.options.blockSize.width)/2)+"px");this.htmlDoms.left_bar.css("width",b-parseInt(parseInt(this.options.blockSize.width)/2)+parseInt(this.options.blockSize.width)+"px")}},end:function(){var a=this;if(this.status){if(this.options.type!=1){var b=parseInt(this.options.vOffset);this.htmlDoms.msg.fadeIn();if(parseInt(this.htmlDoms.gap.css("left"))>=parseInt(this.htmlDoms.move_block.css("left"))-b&&parseInt(this.htmlDoms.gap.css("left"))<=parseInt(this.htmlDoms.move_block.css("left"))+b){this.htmlDoms.move_block.css("background-color","#5cb85c");this.htmlDoms.left_bar.css({"border-color":"#5cb85c","background-color":"rgb(92, 184, 92)"});this.htmlDoms.icon.css("color","#fff");this.htmlDoms.icon.removeClass("fa-angle-right");this.htmlDoms.icon.addClass("fa-check");this.htmlDoms.refresh.hide();this.htmlDoms.move_block.unbind("mousedown touchstart");a.$element.find(".verify-msg:eq(0)").text("");this.options.success()}else{this.htmlDoms.move_block.css("background-color","#d9534f");this.htmlDoms.left_bar.css("border-color","#d9534f");this.htmlDoms.icon.css("color","#fff");this.htmlDoms.icon.removeClass("fa-angle-right");this.htmlDoms.icon.addClass("fa-close");setTimeout(function(){a.htmlDoms.move_block.animate({left:"0px"},"fast");a.htmlDoms.left_bar.animate({width:"40px"},"fast");a.htmlDoms.left_bar.css({"border-color":"#ddd"});a.htmlDoms.move_block.css("background-color","#fff");a.htmlDoms.icon.css("color","#000");a.htmlDoms.icon.removeClass("fa-close");a.htmlDoms.icon.addClass("fa-angle-right");a.$element.find(".verify-msg:eq(0)").text("向右滑动完成验证")},400);this.options.error()}}else{if(parseInt(this.htmlDoms.move_block.css("left"))>=parseInt(this.setSize.bar_width)-parseInt(this.options.barSize.height)-parseInt(this.options.vOffset)){this.htmlDoms.move_block.css("background-color","#5cb85c");this.htmlDoms.left_bar.css({color:"#4cae4c","border-color":"#5cb85c","background-color":"#fff"});this.htmlDoms.icon.css("color","#fff");this.htmlDoms.icon.removeClass("fa-angle-right");this.htmlDoms.icon.addClass("fa-check");this.htmlDoms.refresh.hide();this.htmlDoms.move_block.unbind("mousedown");this.htmlDoms.move_block.unbind("touchstart");this.$element.find(".verify-msg:eq(1)").text("验证成功");this.options.success()}else{this.htmlDoms.move_block.css("background-color","#d9534f");this.htmlDoms.left_bar.css("border-color","#d9534f");this.htmlDoms.icon.css("color","#fff");this.htmlDoms.icon.removeClass("fa-angle-right");this.htmlDoms.icon.addClass("fa-close");setTimeout(function(){a.htmlDoms.move_block.animate({left:"0px"},"fast");a.htmlDoms.left_bar.animate({width:"40px"},"fast");a.htmlDoms.left_bar.css({"border-color":"#ddd"});a.htmlDoms.move_block.css("background-color","#fff");a.htmlDoms.icon.css("color","#000");a.htmlDoms.icon.removeClass("fa-close");a.htmlDoms.icon.addClass("fa-angle-right");a.$element.find(".verify-msg:eq(0)").text("向右滑动解锁")},400);this.options.error()}}this.status=false}},resetSize:function(a){var b,img_height,bar_width,bar_height;var c=a.$element.parent().width()||$(n).width();var d=a.$element.parent().height()||$(n).height();if(a.options.imgSize.width.indexOf("%")!=-1){b=parseInt(a.options.imgSize.width)/100*c+"px"}else{b=a.options.imgSize.width}if(a.options.imgSize.height.indexOf("%")!=-1){img_height=parseInt(a.options.imgSize.height)/100*d+"px"}else{img_height=a.options.imgSize.height}if(a.options.barSize.width.indexOf("%")!=-1){bar_width=parseInt(a.options.barSize.width)/100*c+"px"}else{bar_width=a.options.barSize.width}if(a.options.barSize.height.indexOf("%")!=-1){bar_height=parseInt(a.options.barSize.height)/100*d+"px"}else{bar_height=a.options.barSize.height}return{img_width:b,img_height:img_height,bar_width:bar_width,bar_height:bar_height}},randSet:function(){var a=Math.floor(Math.random()*9+1);var b=Math.floor(Math.random()*9+1);var c=a*parseInt(this.setSize.img_height)/15+parseInt(this.setSize.img_height)*0.1;var d=b*parseInt(this.setSize.img_width)/15+parseInt(this.setSize.img_width)*0.1;this.$element.find(".verify-img-panel").css("margin-bottom",this.options.vSpace+"px");this.$element.find(".verify-gap").css({top:c,left:d});this.$element.find(".verify-sub-block").css({top:"-"+(parseInt(this.setSize.img_height)-c+this.options.vSpace+2)+"px","background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height,"background-position-y":"-"+c+"px","background-position-x":"-"+d+"px"});if(this.$element.find(".jigsaw_top")!=0){this.$element.find(".jigsaw_top").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height,"background-position-y":"-"+(c-(Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/2)*0.9+1)+"px","background-position-x":"-"+(d+(Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4)*0.9+2)+"px"})}if(this.$element.find(".jigsaw_left")!=0){this.$element.find(".jigsaw_left").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height,"background-position-y":"-"+(c+(Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4)*0.9+2)+"px","background-position-x":"-"+(d-(Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/2)*0.9+1)+"px"})}if(this.$element.find(".jigsaw_right")!=0){this.$element.find(".jigsaw_right").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height,"background-position-y":"-"+(c+(Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2))/4)*0.9+2)+"px","background-position-x":"-"+(d+(Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2)))*0.9)+"px"})}if(this.$element.find(".jigsaw_bottom")!=0){this.$element.find(".jigsaw_bottom").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height,"background-position-y":"-"+(c+(Number(this.options.blockSize.height.substr(0,this.options.blockSize.height.length-2)))*0.9)+"px","background-position-x":"-"+(d+(Number(this.options.blockSize.width.substr(0,this.options.blockSize.width.length-2))/4)*0.9+2)+"px"})}},refresh:function(){this.randSet();this.img_rand=Math.floor(Math.random()*this.options.imgPath.length);this.$element.find(".verify-img-panel").css({background:"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height});if(this.$element.find(".jigsaw_top")!=0){this.$element.find(".jigsaw_top").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height})}if(this.$element.find(".jigsaw_left")!=0){this.$element.find(".jigsaw_left").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height})}if(this.$element.find(".jigsaw_right")!=0){this.$element.find(".jigsaw_right").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height})}if(this.$element.find(".jigsaw_bottom")!=0){this.$element.find(".jigsaw_bottom").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height})}this.$element.find(".verify-sub-block").css({"background-image":"url("+this.options.imgPath[this.img_rand]+")","background-size":this.setSize.img_width+" "+this.setSize.img_height})},getLeft:function(a){var b=$(a).offset().left;return b}};var v=function(a,b){this.$element=a;this.defaults={defaultNum:4,checkNum:3,vSpace:5,imgPath:["1.jpg","2.jpg"],imgSize:{width:"400px",height:"200px"},barSize:{width:"400px",height:"40px"},ready:function(){},success:function(){},error:function(){}},this.options=$.extend({},this.defaults,b)};v.prototype={init:function(){var b=this;b.loadDom();b.refresh();b.options.ready();this.$element[0].onselectstart=o.body.ondrag=function(){return false};b.$element.find(".verify-img-panel canvas").on("click",function(e){b.checkPosArr.push(b.getMousePos(this,e));if(b.num==b.options.checkNum){b.num=b.createPoint(b.getMousePos(this,e));setTimeout(function(){var a=b.comparePos(b.fontPos,b.checkPosArr);if(a==false){b.options.error();b.$element.find(".verify-bar-area").css({color:"#d9534f","border-color":"#d9534f"});b.$element.find(".verify-msg").text("验证失败");setTimeout(function(){b.$element.find(".verify-bar-area").css({color:"#000","border-color":"#ddd"});b.refresh()},400)}else{b.$element.find(".verify-bar-area").css({color:"#4cae4c","border-color":"#5cb85c"});b.$element.find(".verify-msg").text("验证成功");b.$element.find(".verify-refresh").hide();b.$element.find(".verify-img-panel").unbind("click");b.options.success()}},400)}if(b.num<b.options.checkNum){b.num=b.createPoint(b.getMousePos(this,e))}});b.$element.find(".verify-refresh").on("click",function(){b.refresh()})},loadDom:function(){this.fontPos=[];this.checkPosArr=[];this.num=1;this.img_rand=Math.floor(Math.random()*this.options.imgPath.length);var a="";var b="";this.setSize=u.prototype.resetSize(this);a+='<div class="verify-img-panel"><div  class="verify-refresh" style="z-index:9999"><i class="iconfont fa-refresh"></i></div><canvas width="'+this.setSize.img_width+'" height="'+this.setSize.img_height+'"></canvas></div><div class="verify-bar-area"><span  class="verify-msg"></span></div>';this.$element.append(a);this.htmlDoms={img_panel:this.$element.find(".verify-img-panel"),bar_area:this.$element.find(".verify-bar-area"),msg:this.$element.find(".verify-msg")};this.htmlDoms.img_panel.css({width:this.setSize.img_width,height:this.setSize.img_height,"background-size":this.setSize.img_width+" "+this.setSize.img_height,"margin-bottom":this.options.vSpace+"px"});this.htmlDoms.bar_area.css({width:this.options.barSize.width,height:this.options.barSize.height,"line-height":this.options.barSize.height})},drawImg:function(a,b){var c=this.$element.find("canvas")[0];var d=c.getContext("2d");d.drawImage(b,0,0,parseInt(this.setSize.img_width),parseInt(this.setSize.img_height));var e=["italic small-caps bold 20px microsoft yahei","small-caps normal 25px arial","34px microsoft yahei"];var f="天地玄黄宇宙洪荒日月盈昃辰宿列张寒来暑往秋收冬藏闰余成岁律吕调阳云腾致雨露结为霜金生丽水玉出昆冈剑号巨阙珠称夜光果珍李柰菜重芥姜海咸河淡鳞潜羽翔龙师火帝鸟官人皇始制文字乃服衣裳推位让国有虞陶唐吊民伐罪周发殷汤坐朝问道垂拱平章爱育黎首臣伏戎羌遐迩体率宾归王";var g=[];var h=Math.floor(parseInt(this.setSize.img_width)/(parseInt(this.options.defaultNum)+1));var j="";var k=Math.floor(Math.random()*5);for(var i=1;i<=this.options.defaultNum;i++){g[i-1]=this.getChars(f,g);j=Math.floor(Math.random()*3);d.font=e[j];d.fillStyle=t[k];if(Math.floor(Math.random()*2)==1){var l=Math.floor(parseInt(this.setSize.img_height)/2)+j*20+20}else{var l=Math.floor(parseInt(this.setSize.img_height)/2)-j*20}d.fillText(g[i-1],h*i,l);this.fontPos[i-1]={"chars":g[i-1],x:h*i,y:l}}for(var i=0;i<this.options.defaultNum-this.options.checkNum;i++){this.shuffle(this.fontPos).pop()}var m="";for(var i=0;i<this.fontPos.length;i++){m+=this.fontPos[i].chars+","}this.htmlDoms.msg.text("请顺序点击【"+m.substring(0,m.length-1)+"】");return this.fontPos},getMousePos:function(a,b){var e=b||n.event;var c=o.documentElement.scrollLeft||o.body.scrollLeft;var d=o.documentElement.scrollTop||o.body.scrollTop;var x=e.clientX-($(a).offset().left-$(n).scrollLeft());var y=e.clientY-($(a).offset().top-$(n).scrollTop());return{x:x,y:y}},getChars:function(a,b){var c=parseInt(Math.floor(Math.random()*a.length));if(c>0){c=c-1}tmp_char=a.charAt(c);if($.inArray(tmp_char,b)==-1){return tmp_char}else{return v.prototype.getChars(a,b)}},shuffle:function(a){var m=a.length,i,temp;while(m>0){i=Math.random()*m-->>>0;temp=a[i];a[i]=a[m];a[m]=temp}return a},createPoint:function(a){this.htmlDoms.img_panel.append('<div class="point-area" style="background-color:#1abd6c;color:#fff;z-index:9999;width:30px;height:30px;text-align:center;line-height:30px;border-radius: 50%;position:absolute;top:'+parseInt(a.y-10)+"px;left:"+parseInt(a.x-10)+'px;">'+this.num+"</div>");return++this.num},comparePos:function(a,b){var c=true;for(var i=0;i<a.length;i++){if(!(parseInt(b[i].x)+40>a[i].x&&parseInt(b[i].x)-40<a[i].x&&parseInt(b[i].y)+40>a[i].y&&parseInt(b[i].y)-40<a[i].y)){c=false;break}}return c},refresh:function(){var a=this;this.$element.find(".point-area").remove();this.fontPos=[];this.checkPosArr=[];this.num=1;this.img_rand=Math.floor(Math.random()*this.options.imgPath.length);var b=new Image();b.src=this.options.imgPath[this.img_rand];$(b).on("load",function(e){this.fontPos=a.drawImg(a,this)})}};$.fn.codeVerify=function(a,b){var c=new q(this,a);c.init()};$.fn.slideVerify=function(a,b){var c=new u(this,a);c.init()};$.fn.pointsVerify=function(a,b){var c=new v(this,a);c.init()}})(jQuery,window,document);